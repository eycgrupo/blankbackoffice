<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views https://axelor.com/xml/ns/object-views/object-views_6.1.xsd">

<grid name="cliente-grid" title="Clientes"
   
    model="com.eyc.base.db.Cliente">
    <field name="nombreCompleto" />
    <field name="saldo" />
    <field name="pagosConsolidados" />
    <field name="pagosNoConsolidados" />

</grid>

<form name="mickeymouse" title="Cliente"
onSave="validar-cliente-saldo"
     model="com.eyc.base.db.Cliente" width="large"  >

   <panel title="Datos del cliente">

    <field name="nombreCompleto" readonly="false" colSpan="12" >
         <editor x-show-titles="false">
             <field name="nombre" colSpan="6"/>
             <field name="apellidos" colSpan="6"/>
          </editor>
    </field>
 

       <field name="activo" widget="BooleanSwitch" colSpan="03"  />
       <field name="saldo" readonlyIf="id"  colSpan="12" />
  </panel>
 
  <panel title="Comentarios"  > 
       <field name="comentario" showTitle="false" widget="TEXT" />
  </panel>

  <panel title="Resúmen de pagos por consolidación"  > 
          <field name="pagosConsolidados" colSpan="06" />
          <field name="pagosNoConsolidados" colSpan="06" />
  </panel>

  <panel-related field="pagos" colSpan="12" orderBy="fecha"
      onChange="save"
     grid-view="pagos-grid" form-view="pagos-form" title="Pagos" />

     <panel sidebar="true" title="Acciones">
        <button name="boton-saludar" title="Saludar" 
        onClick="com.eyc.base.web.CursoController:saludarme" />
        <button name="boton-saludar" title="Mostrar producto" 
        onClick="com.eyc.base.web.CursoController:mostrarProducto" />
     </panel>
</form>

<action-view name="cliente-todos-accion"
     title="Clientes" 
     model="com.eyc.base.db.Cliente">
  <view type="grid" name="cliente-grid" />
  <view type="form" name="mickeymouse" />
</action-view>

<action-validate name="validar-cliente-saldo">
   <error message="Saldo no puede ser negativo" if="saldo &lt; 0" />
  </action-validate>

<action-view name="cliente-morosos-accion"
     title="Clientes Morosos" 
     model="com.eyc.base.db.Cliente">
  <view type="grid" name="cliente-grid" />
  <view type="form" name="mickeymouse" />
  <domain>self.saldo &gt; 0 </domain>
</action-view>

<action-view name="cliente-al-dia-accion"
     title="Clientes Morosos" 
     model="com.eyc.base.db.Cliente">
  <view type="grid" name="cliente-grid" />
  <view type="form" name="mickeymouse" />
  <domain>self.saldo = 0 </domain>
</action-view>

<action-view name="cliente-con-pagos-accion"
     title="Clientes con pagos" 
     model="com.eyc.base.db.Cliente">
  <view type="grid" name="cliente-grid" />
  <view type="form" name="mickeymouse" />
  <domain>self.id IN (select cliente FROM Pago)</domain>
</action-view>


<action-method name="llamar.hola.mundo">
    <call class="com.eyc.base.Demo" method="saludar(nombreCompleto)" />
</action-method>

</object-views>